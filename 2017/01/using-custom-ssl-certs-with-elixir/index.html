<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.c9e9369809a9fdda2b8a.css">@import url(https://cdnjs.cloudflare.com/ajax/libs/hack-font/3.003/web/hack.min.css);@import url(https://fonts.googleapis.com/css2?family=Boogaloo&family=Raleway&family=Ubuntu:wght@300;400&display=swap);*,:after,:before{margin:0;padding:0;box-sizing:inherit}a{text-decoration:none;color:inherit}html{font-size:62.5%}header{text-align:center}body{font-family:Ubuntu\ 2,Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.7}header{max-width:110rem;padding:.5rem 0;margin:0 auto 1.45rem}header .title{text-decoration:none;font-size:2.4rem}header .subtitle,header .title{font-family:Raleway,Helvetica Neue,Helvetica,Arial,sans-serif;color:#000}header .subtitle{line-height:1.1;font-size:1.4rem;padding-left:.1rem}main{max-width:76.8rem;margin:0 auto}.article__heading{font-family:Ubuntu,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:4rem;font-weight:300;letter-spacing:-1px}.article__meta{font-size:1.6rem;margin-bottom:.7rem;color:#403d39}.article__meta>span{color:#252422}.article__blurb{margin-top:1.4rem}.article__readmore{margin-top:1.4rem;font-size:1.4rem}.article__readmore:hover{color:#bdcace}.article__readmore>a{color:#2d5cb7}.article__content{margin-top:.2rem;font-family:Ubuntu,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:1.6rem;color:#333;line-height:1}.article__content>h2{font-size:2.8rem;margin-top:2.4rem;margin-bottom:1.2rem;letter-spacing:-1px}.article__content>pre{background-color:#f2f2f2;padding:1.2rem;margin:1.2rem 0;border-radius:.2rem}.article__content>pre>code{font-size:1.3rem;font-family:Hack,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;line-height:2.2rem}article:not(:first){border-top:1px solid #252422}footer{margin-top:5rem;width:100%;text-align:center;font-size:1.4rem;font-weight:400;color:#403d39;text-transform:uppercase}</style><meta name="generator" content="Gatsby 2.21.13"/><title data-react-helmet="true">Using Custom SSL Certs with Elixir | Cape Town ðŸ – London</title><meta data-react-helmet="true" name="description" content="I&#x27;m Jason Forte and this blog is about tech, ethics, startups &amp; the future."/><meta data-react-helmet="true" property="og:title" content="Using Custom SSL Certs with Elixir"/><meta data-react-helmet="true" property="og:description" content="I&#x27;m Jason Forte and this blog is about tech, ethics, startups &amp; the future."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@hellojforte"/><meta data-react-helmet="true" name="twitter:title" content="Using Custom SSL Certs with Elixir"/><meta data-react-helmet="true" name="twitter:description" content="I&#x27;m Jason Forte and this blog is about tech, ethics, startups &amp; the future."/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link as="script" rel="preload" href="/webpack-runtime-c7cf1f2c0ffa842cb91f.js"/><link as="script" rel="preload" href="/framework-20ef01989315425214b5.js"/><link as="script" rel="preload" href="/app-b42ed5a8af7cb6f3088b.js"/><link as="script" rel="preload" href="/styles-f12963b3798c232a68f6.js"/><link as="script" rel="preload" href="/commons-125ef734e17696eacede.js"/><link as="script" rel="preload" href="/component---src-templates-article-js-e474c0ac5f6d04ce756a.js"/><link as="fetch" rel="preload" href="/page-data/2017/01/using-custom-ssl-certs-with-elixir/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header><div><h1><a class="title" href="/">Cape Town ðŸ – London</a></h1><h2 class="subtitle">A blog about tech, ethics &amp; startups</h2></div></header><div style="margin:0 auto;max-width:960px;padding:0 1.0875rem 1.45rem"><main><h1 class="article__heading">Using Custom SSL Certs with Elixir</h1><p class="article__meta">By <span>Jason Forte</span> â€¢ <!-- -->30 January 2017</p><div class="article__content"><h2>Why Custom SSL Certs?</h2>
<p>While there is a great use-case for token based authentication, there is an emerging trend of using self-signed ssl certs to authenticate against an API.</p>
<blockquote>
<p>This has the neat effect of forcing clients to encrypt communications with your API.</p>
</blockquote>
<h2>Connecting to an API via Elixir</h2>
<p>To use custom certs when connecting to an external endpoint make use of the <a href="https://github.com/benoitc/hackney">Hackney</a>
library which comes bundled with <a href="https://github.com/edgurgel/httpoison">HTTPoison</a>.</p>
<pre><code class="language-elixir">def deps do
  [{:httpoison, "~> 0.10.0"}]
end
</code></pre>
<p>Remember to include the runtime dependency.</p>
<pre><code class="language-elixir">def application do
  [applications: [:httpoison]]
end
</code></pre>
<h2>Making the HTTPS Request</h2>
<p>Making a request is as simple as supplying the paths to the SSL cert files when calling HTTPoison functions.</p>
<pre><code class="language-elixir">def https_options() do
  [
    hackney: [
      ssl_options: [
        cacertfile: "/path/to/cacertfile.pem",
        certfile: "/path/to/certfile.pem",
        keyfile: "/path/to/keyfile.pem"
      ]
    ]
  ]
end

def get_request(url) do
    HTTPoison.get(url, [], https_options())
end
</code></pre>
<p><em>I like to separate the hackney settings purely for readability reasons.</em></p>
<h2>Conclusion</h2>
<p>By adding SSL Certs as an authentication mechanism you force your clients to use SSL when communicating with your API. The drawback to this approach is that it still suffers from the same client side trust issues as with basic auth.</p>
<blockquote>
<p>If the client accidentally leaks their cert then then you will need to make use of <a href="https://jamielinux.com/docs/openssl-certificate-authority/certificate-revocation-lists.html">Certificate Revocation Lists</a> (CRLs) to protect your API from malicious activity.</p>
</blockquote>
<p>Additional to this some clients may not be as familiar with the certificate generation and signing process which could
deter smaller clients from implementing your API.</p></div></main><footer>Copyright Â© <!-- -->2020<!-- --> | Jason Forte</footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-26326918-3', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2017/01/using-custom-ssl-certs-with-elixir";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-b42ed5a8af7cb6f3088b.js"],"component---src-pages-404-js":["/component---src-pages-404-js-eafddd4f93ff47a0145b.js"],"component---src-pages-index-js":["/component---src-pages-index-js-0a44ff729ee6e33fe244.js"],"component---src-templates-article-js":["/component---src-templates-article-js-e474c0ac5f6d04ce756a.js"]};/*]]>*/</script><script src="/component---src-templates-article-js-e474c0ac5f6d04ce756a.js" async=""></script><script src="/commons-125ef734e17696eacede.js" async=""></script><script src="/styles-f12963b3798c232a68f6.js" async=""></script><script src="/app-b42ed5a8af7cb6f3088b.js" async=""></script><script src="/framework-20ef01989315425214b5.js" async=""></script><script src="/webpack-runtime-c7cf1f2c0ffa842cb91f.js" async=""></script></body></html>